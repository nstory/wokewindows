<% @layout_application_title = "Data Exports" %>
<% @layout_application_canonical = exports_url %>

<div class="container">
  <div class="row">
    <div class="col">
      <h1>Data Exports</h1>
      <p class="lead">Daily exports of records providing a view into the Boston Police Department (BPD)</p>
      <p>These <a href="https://en.wikipedia.org/wiki/Comma-separated_values">CSV</a> files are produced daily from data in the Woke Windows database, all of which was originally sourced from public records provided by the <a href="https://www.boston.gov/">City of Boston</a>, the <a href="https://www.mass.gov/">Commonwealth of Massachusetts</a>, and other entities. These files are ready to be imported into <a href="https://www.microsoft.com/en-us/microsoft-365/excel">Microsoft Excel</a> or your preferred tool for data analysis.</p>
      <p>Have you done something interesting with this data and want to share? Do you need help or have questions? Reach out to us at <%= contact_us %> or <a href="https://twitter.com/nathan_story">on Twitter</a>. We would love to hear from you!</p>
      <table class="table">
        <thead>
          <tr>
            <th>File</th>
            <th>Last Modified</th>
            <th>Size</th>
            <th></th>
          </tr>
        </thead>
        <tbody>
          <% @exports.each do |key, export| %>
            <%= render "table_row", export: export, key: key %>
          <% end %>
        </tbody>
      </table>

      <h2 id="officers">Officers</h2>
      <%= render "info", export: @exports["officers"] %>
      <p>Export of the <code>officers</code> table. See <%= link_to "Officers & Employees", page_path("help", anchor: "officers") %>.</p>
      <table class="table export-dictionary">
        <thead>
          <tr>
            <th>Column</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>active</td>
            <td>whether the employee is currently employed at BPD; if the employee appears in <%= link_to "2020 Alpha Listing", page_path("help", anchor: "alpha_listing_20200715") %> or in a later <%= link_to "public journal", page_path("help", anchor: "district_journal") %>, they are considered active</td>
          </tr>
          <tr>
            <td>employee_id</td>
            <td>City of Boston employee id; useful for joining to other datasets</td>
          </tr>
          <tr>
            <td>name</td>
            <td>Officer's name taken from earnings reports or alpha listing</td>
          </tr>
          <tr>
            <td>organization</td>
            <td>The organization for which the officer works within the department</td>
          </tr>
          <tr>
            <td>title</td>
            <td>Officer's title, taken from earnings reports or alpha listing</td>
          </tr>
          <tr>
            <td>doa</td>
            <td>Date of Appointment. Officer's start date</td>
          </tr>
          <tr>
            <td>badge</td>
            <td>badge number from most recent alpha listing where officer appears. This is not a unique identifier; the numbers may be re-used overtime.</td>
          </tr>
          <tr>
            <td>zip_code</td>
            <td>five-digit zip code where officer resides</td>
          </tr>
          <tr>
            <td>city</td>
            <td>city where officer resides (derived from zip code)</td>
          </tr>
          <tr>
            <td>state</td>
            <td>two-letter abbreviation for state where officer resides (derived from zip code)</td>
          </tr>
          <tr>
            <td>neighborhood</td>
            <td>neighborhood where officer resides or blank if officer does not reside in Boston (derived from zip code); see <%= link_to "Zip Code and Neighborhood", page_path("help", anchor: "officer_zip_code") %></td>
          </tr>
          <tr>
            <td>regular</td>
            <td>2019 regular earnings; this and other earnings columns are sourced from <%= link_to "Employee Earnings Reports", page_path("help", anchor: "employee_earnings") %></td>
          </tr>
          <tr>
            <td>retro</td>
            <td>2019 retroactive earnings</td>
          </tr>
          <tr>
            <td>other</td>
            <td>2019 other earnings</td>
          </tr>
          <tr>
            <td>overtime</td>
            <td>2019 overtime earnings</td>
          </tr>
          <tr>
            <td>injured</td>
            <td>2019 injured pay earnings</td>
          </tr>
          <tr>
            <td>detail</td>
            <td>2019 earnings from working <%= link_to "paid details", page_path("help", anchor: "details") %></td>
          </tr>
          <tr>
            <td>quinn</td>
            <td>2019 earnings from education incentive</td>
          </tr>
          <tr>
            <td>total</td>
            <td>2019 total earnings</td>
          </tr>
          <tr>
            <td>rank</td>
            <td>officer rank e.g. <code>sergt</code> for Sergeant; the <code>title</code> column also often has this information</td>
          </tr>
          <tr>
            <td>ia_score</td>
            <td>metric calculated by Woke Windows based on the officer's Internal Affairs (IA) record; a number from <code>0</code> (least concerning) to <code>5</code> (very concerning); see <%= link_to "IA Score", page_path("help", anchor: "ia_score") %></td>
          </tr>
          <tr>
            <td>field_contacts_count</td>
            <td>total number of FIO records where this officer is the contact officer; see <%= link_to "Field Contacts (FIO)", page_path("help", anchor: "field_contacts") %></td>
          </tr>
          <tr>
            <td>incidents_count</td>
            <td>total number of incidents filed by this officer (note: this is most likely an undercount because we don't know the filing officer for many incidents)</td>
          </tr>
          <tr>
            <td>complaints_count</td>
            <td>total number of Internal Affairs complaints</td>
          </tr>
          <tr>
            <td>swats_count</td>
            <td>total number of SWAT reports</td>
          </tr>
          <tr>
            <td>details_count</td>
            <td>total number of paid details</td>
          </tr>
          <tr>
            <td>citations_count</td>
            <td>total number of traffic citations</td>
          </tr>
          <tr>
            <td>articles_officers_count</td>
            <td>total number of articles where this officer is mentioned</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
